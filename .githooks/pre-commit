#!/bin/bash

# ã‚³ãƒŸãƒƒãƒˆå¯¾è±¡Swiftãƒ•ã‚¡ã‚¤ãƒ«ã‚’å–å¾—(1è¡Œã§ç©ºç™½åŒºåˆ‡ã‚Šï¼‰
stagedSwiftFiles=$(git diff --cached --name-only --diff-filter=ACMR | grep '\.swift$')

if xcrun --find swift-format >/dev/null && [ -n "$stagedSwiftFiles" ]; then
  xcrun swift-format format --in-place $stagedSwiftFiles
else
  echo "âš ï¸ swift-format ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚"
  exit 0
fi

if ! git diff --quiet -- $stagedSwiftFiles; then
  echo ""
  echo "âœ¨ swift-format ã«ã‚ˆã‚Šãƒ•ã‚¡ã‚¤ãƒ«ãŒä¿®æ­£ã•ã‚Œã¾ã—ãŸã€‚"
  echo "å¤‰æ›´ã‚’ç¢ºèªã—ã€ã‚‚ã†ä¸€åº¦ã‚³ãƒŸãƒƒãƒˆã—ã¦ãã ã•ã„ã€‚"
  echo ""
  echo "ğŸ” ä¿®æ­£ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«:"
  git diff --stat
  exit 1
fi


